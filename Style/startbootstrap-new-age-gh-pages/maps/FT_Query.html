<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>WMA</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="vendor/simple-line-icons/css/simple-line-icons.css">


    <!-- Theme CSS -->
    <link href="../css/new-age.css" rel="stylesheet">

<style type = "text/css">
	html {height: 98%}
	body {height: 100%}
	#googft-mapCanvas {height: 85%}
</style>

<script type="text/javascript" src="https://maps.google.com/maps/api/js?v=3"></script>

<script type="text/javascript">
			var map;
			var kmlLayer = null;
			var riderLayer = null;
			var queryLayer = null;
			var currentLayer = null;
			var center = new google.maps.LatLng(39.828200, -98.579500);

	var lowNum;
	var query1;
	var query2;

			function initialize() {
					var mapDiv = document.getElementById('googft-mapCanvas');
					map = new google.maps.Map(mapDiv, {
							center: center,
							zoom: 5,
							mapTypeId: google.maps.MapTypeId.ROADMAP
					});

					queryLayer = new google.maps.FusionTablesLayer({
							map: map,
							heatmap: { enabled: false },
							query: {
									select: "Flag",
									from: "1wEi1klGCHS_9RxFmIrxgcWqZO4jYCv8SSGxxUGre",
									where: ""
							},
							options: {
									styleId: 2,
									templateId: 2
							}
					});
		currentLayer = queryLayer;
			}

			function passVar1() {
					lowNum = document.getElementById("lowNum").value;
					highNum = document.getElementById("highNum").value;
					query1 = "col7 >= " + lowNum + " and " + "col7 <= " + highNum;
					queryLayer.setOptions({
							query: {
									select: "Flag",
									from: "1wEi1klGCHS_9RxFmIrxgcWqZO4jYCv8SSGxxUGre",
									where: query1
							}
					});
			}

			function passVar2() {
					flagNum = document.getElementById("flagNum").value;
					query2 = "Flag = " + flagNum;
					riderLayer.setOptions({
							query: {
									select: "Flag",
									from: "1sIH9DhpWJqagN5UkKqBUfUz3MTezl_acw4luDSPJ",
									where: query2
							}
					});
			}

			function reset1(){
					queryLayer.setOptions({
							query: {
									select: "Flag",
									from: "1wEi1klGCHS_9RxFmIrxgcWqZO4jYCv8SSGxxUGre"
							}
	})}

			function reset2(){
					riderLayer.setOptions({
							query: {
									select: "Flag",
									from: "1sIH9DhpWJqagN5UkKqBUfUz3MTezl_acw4luDSPJ"
							}
					})}

			function riderF() {
					map.setCenter(center);
					map.setZoom(5);
					clearLayer();
					riderLayer = new google.maps.FusionTablesLayer({
							map: map,
							heatmap: { enabled: false },
							query: {
									select: "Flag",
									from: "1sIH9DhpWJqagN5UkKqBUfUz3MTezl_acw4luDSPJ",
									where: ""
							},
							options: {
									styleId: 2,
									templateId: 2
							}
					});
					riderLayer.setMap(map);
					currentLayer = riderLayer;
			}

			function queryF() {
					map.setCenter(center);
					map.setZoom(5);
					clearLayer();
					queryLayer.setMap(map);
					currentLayer = queryLayer;
			}

			function kmlF() {
					url = document.getElementById("kmlUrl").value;
					clearLayer();
					kmlLayer = new google.maps.KmlLayer(url, {
							map: map,
							preserveViewport: true
					});
					currentLayer = kmlLayer;
			}

			function clearLayer() {
					if (currentLayer != null) {
							currentLayer.setMap(null);
					}
			}

			google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>


<div align="center">

<div>
  <div class="container">
  	<div class="row">
  		<div class="span12">

  			<div id="tab" class="btn-group" data-toggle="buttons">
  				<a onclick="kmlF();" href="#memorials" class="btn btn-primary  active" data-toggle="tab">
  					<input type="radio">Memorials</a>

  				<a onclick="riderF();" href="#riders" class="btn btn-primary " data-toggle="tab">
  					<input type="radio">Riders</a>

  				<a onlick = "queryF();" href="#results" class="btn btn-primary " data-toggle="tab">
  					<input type="radio">Results</a>

  			</div>

  			<div class="tab-content">
  				<div class="tab-pane active" id="memorials"><br>2016 Tour of Honor Memorials
            <br><br>
            <button onclick="passVar()" type="button" class="btn btn-success btn-sm">Find</button>
            <br>
          </div>


  				<div class="tab-pane" id="riders"><br>2016 Riders (Mapped by City)
            <br><br>
            <input type="text" id="flagNum" placeholder ="Rider Flag #" value = "">
            <button onclick="passVar2()" type="button" class="btn btn-success btn-sm">Find</button>
            <button onclick="reset2()" type="button" class="btn btn-danger btn-sm">clear</button>
            <br>
          </div>


  				<div class="tab-pane" id="results"><br>Total Sites Visited by Riders, 2016
            <br><br>
        		<input type="text" id="lowNum" placeholder ="Min Site Visits" value = "">
        		<input type="text" id="highNum" placeholder ="Max Site Visits" value = "">

        		<button onclick="passVar1()" type="button" class="btn btn-success btn-sm">Find</button>
        		<button onclick="reset1()" type="button" class="btn btn-danger btn-sm">Reset</button>
          </div>
            <br>
  			</div>
  		</div>
  	</div>
  </div>



	</div>
</div>

<div id="googft-mapCanvas"></div>

<!-- jQuery -->
<script src="../vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Theme JavaScript -->
<script src="../js/new-age.min.js"></script>

</body>

</html>
