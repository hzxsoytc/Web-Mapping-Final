<!DOCTYPE html>
<html>
<head>
	<meta name="viewport"></meta>
	<title>ToH_2016_Reults - Google Fusion Tables</title>
	<style type="text/css">
		html {height: 100%}
		body {height: 97.5%;
			margin: 2.5%}
		#googft-mapCanvas {height: 100%}
	</style>

	<script type="text/javascript" src="https://maps.google.com/maps/api/js?v=3"></script>

	<script type="text/javascript">

		var lowNum;
		var query;
		var layer;

        function initialize() {
            google.maps.visualRefresh = true;
            var mapDiv = document.getElementById('googft-mapCanvas');
            var map = new google.maps.Map(mapDiv, {
                center: new google.maps.LatLng(39.828200, -98.579500),
                zoom: 5,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            layer = new google.maps.FusionTablesLayer({
                map: map,
                heatmap: { enabled: false },
                query: {
                    select: "Flag",
                    from: "1wEi1klGCHS_9RxFmIrxgcWqZO4jYCv8SSGxxUGre",
                    where: ""
                },
                options: {
                    styleId: 2,
                    templateId: 2
                }
            });
        }

        function passVar() {
            lowNum = document.getElementById("lowNum").value;
            highNum = document.getElementById("highNum").value;
            query = "col7 >= " + lowNum + " and " + "col7 <= " + highNum;
            layer.setOptions({
                query: {
                    select: "Flag",
                    from: "1wEi1klGCHS_9RxFmIrxgcWqZO4jYCv8SSGxxUGre",
                    where: query
                }
            });
        }

        function reset(){
            layer.setOptions({
                query: {
                    select: "Flag",
                    from: "1wEi1klGCHS_9RxFmIrxgcWqZO4jYCv8SSGxxUGre"
                }
		})}

        google.maps.event.addDomListener(window, 'load', initialize);
	</script>
</head>

<body>
<input type="text" id="lowNum" placeholder ="Enter lower visits number" value = "">
<input type="text" id="highNum" placeholder ="Enter higher visits number" value = "">
<button onclick="passVar()">Try it</button>
<button onclick="reset()">Reset</button>
<div id="googft-mapCanvas"></div>
</body>
</html>